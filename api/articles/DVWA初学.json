{"title":"DVWA初学","uid":"fc19ff46ec94019a93ce13e12e1e89c6","slug":"DVWA初学","date":"2020-03-09T08:01:01.000Z","updated":"2020-04-13T00:46:12.000Z","comments":true,"path":"api/articles/DVWA初学.json","keywords":"A1andNS","cover":[],"content":"<h2 id=\"DVWA的介绍\"><a href=\"#DVWA的介绍\" class=\"headerlink\" title=\"DVWA的介绍\"></a>DVWA的介绍</h2><p>DVWA是用PHP和MySQL编写的用于常规web漏洞教学和检测web脆弱性测试程序，它包含SQL注入、XSS、CSRF等常见的一些安全漏洞。我们可以在本机或者靶机甚至服务器搭建DVWA环境，供我们练习渗透技术，也可以查看后端是怎么写的，了解原理。最重要的还是自己搭的平台，合法的进行练习和渗透。这点很重要，最好不要随意攻击他人网站，毕竟现在有网络安全法了。DVWA的官方网站是http:// <a href=\"http://www.dvwa.co.uk/\">www.dvwa.co.uk/</a></p>\n<h2 id=\"DVWA的安装\"><a href=\"#DVWA的安装\" class=\"headerlink\" title=\"DVWA的安装\"></a>DVWA的安装</h2><h3 id=\"搭建PHP环境\"><a href=\"#搭建PHP环境\" class=\"headerlink\" title=\"搭建PHP环境\"></a>搭建PHP环境</h3><p>想要运行DVWA必须搭建一个PHP环境，而且在Windows下进行搭建和配置环境时十分复杂的。所以一般使用一个集成化软件PHPStudy，这是一个可以很轻松进行本地环境搭建的软件。不过之前也爆出了有后门的问题，不过据我了解，现在官网上的版本已经被修复过了，大家可以去下载没有后门的版本。附上网址：<a href=\"http://www.phpstudy.net/\">http://www.phpstudy.net/</a></p>\n<p>安装步骤这里就不过多描述了，一般就是选择全部安装，如果使用不了，可以看看是不是被安全软件或者防火墙拦截了，或者相关端口被调用。</p>\n<p><img src=\"https://img-blog.csdnimg.cn/20191031205738531.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2MTM5MDQ1,size_16,color_FFFFFF,t_70\" alt=\"1\"></p>\n<h3 id=\"安装DVWA\"><a href=\"#安装DVWA\" class=\"headerlink\" title=\"安装DVWA\"></a>安装DVWA</h3><p>首先下载DVWA文件</p>\n<p>然后要确保可以进入<a href=\"http://localhost/phpmyadmin%E6%88%96%E8%80%85%E8%BF%9E%E6%8E%A5%E4%B8%8A%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%8C%E5%A6%82%E4%B8%8B%E5%9B%BE%EF%BC%9A\">http://localhost/phpmyadmin或者连接上数据库，如下图：</a></p>\n<p><img src=\"https://img-blog.csdnimg.cn/20191031205812767.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2MTM5MDQ1,size_16,color_FFFFFF,t_70\" alt=\"2\"></p>\n<p>将DVWA压缩包文件解压到phpstudy的www目录下</p>\n<p><img src=\"https://img-blog.csdnimg.cn/20191031205830423.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2MTM5MDQ1,size_16,color_FFFFFF,t_70\" alt=\"3\"></p>\n<p>然后在地址栏里输入<a href=\"http://localhost/DVWA-1.9/setup.php\">http://localhost/DVWA-1.9/setup.php</a></p>\n<p>这里的DVWA-1.9是你放在www文件夹里的文件名，是什么就写什么。</p>\n<p><img src=\"https://img-blog.csdnimg.cn/20191031205850649.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2MTM5MDQ1,size_16,color_FFFFFF,t_70\" alt=\"4\"></p>\n<p>点击create/reset database，如果出现”could not connect to the database - please check the config file.”的错误信息。就要打开DVWA/config/config.inc.php文件，进行一些改动</p>\n<p><img src=\"https://img-blog.csdnimg.cn/20191031205906872.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2MTM5MDQ1,size_16,color_FFFFFF,t_70\" alt=\"5\"></p>\n<p>再重新创建数据库即可。</p>\n<p>进入链接<a href=\"http://localhost/DVWA/login.php%EF%BC%8C%E5%85%B6%E4%B8%AD%E9%BB%98%E8%AE%A4%E7%94%A8%E6%88%B7%E5%90%8D/%E5%AF%86%E7%A0%81%E6%9C%89%E5%87%A0%E4%B8%AA%EF%BC%8C%E8%BF%99%E9%87%8C%E5%B0%B1%E8%AF%B4%E4%B8%80%E4%B8%AA%EF%BC%8C%E5%85%B6%E4%BB%96%E5%A4%A7%E5%AE%B6%E8%87%AA%E8%A1%8C%E5%8E%BB%E8%8E%B7%E5%8F%96%E5%90%A7%E3%80%82admin/password%E3%80%82%E8%BF%99%E6%98%AF%E5%85%B6%E4%B8%AD%E4%B8%80%E4%B8%AA%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%E3%80%82\">http://localhost/DVWA/login.php，其中默认用户名/密码有几个，这里就说一个，其他大家自行去获取吧。admin/password。这是其中一个账号密码。</a></p>\n<h3 id=\"配置安全级别\"><a href=\"#配置安全级别\" class=\"headerlink\" title=\"配置安全级别\"></a>配置安全级别</h3><p>在页面的左侧有个“DVWA Security”，可以进入进行安全级别选择，安全级别越高渗透难度就越大，所以一般都从low级别开始，不要随意就impossiable，不太现实。记得设置完要submit不然就又是impossible了。</p>\n<h2 id=\"DVWA基本使用\"><a href=\"#DVWA基本使用\" class=\"headerlink\" title=\"DVWA基本使用\"></a>DVWA基本使用</h2><h3 id=\"brute-Force（暴力破解）\"><a href=\"#brute-Force（暴力破解）\" class=\"headerlink\" title=\"brute Force（暴力破解）\"></a>brute Force（暴力破解）</h3><p>一般是利用burpsuit和字典及逆行你暴力破解，例如轰动全国的2014年12306撞库事件，本质就是，暴力破解攻击。</p>\n<h3 id=\"command-injection（命令注入）\"><a href=\"#command-injection（命令注入）\" class=\"headerlink\" title=\"command injection（命令注入）\"></a>command injection（命令注入）</h3><p>通过构造恶意结构的参数来破环命令语句结构，从而达到执行恶意代码的目的。PHP命令注入攻击漏洞就是PHP应用里最常见的脚本漏洞之一。Windows和Linux系统都可以用&amp;&amp;来执行多条命令，这就给漏洞利用创造了机会。因为只有&amp;&amp;和；会被过滤，所以&amp;不会被过滤，就可以输入”localhost&amp;net user”利用漏洞。</p>\n<h3 id=\"CSRF（跨站请求伪造）\"><a href=\"#CSRF（跨站请求伪造）\" class=\"headerlink\" title=\"CSRF（跨站请求伪造）\"></a>CSRF（跨站请求伪造）</h3><p>利用尚未失效的cookie、会话等身份认证信息，诱骗其单击恶意链接或者访问包含攻击代码的页面，在受害人不知情的情况下以受害人的身份向身份认证信息所对应的服务器发送请求，从而完成非法操作。CSRF和XSS最大的区别就是，CSRF没有盗取cookie而是直接利用。</p>\n<p>CSRF的最基础利用就是直接使用构造链接：<a href=\"http://localhost/dvwa/vulnerabilities/csrf?password_new=password&amp;password_conf=password&amp;Change=Change#\">http://localhost/dvwa/vulnerabilities/csrf?password_new=password&amp;password_conf=password&amp;Change=Change#</a></p>\n<p>当受害者单击了这个链接，他的密码就会被改为password。当然这是比较简单的攻击方式，从链接就知道是在改密码。</p>\n<h3 id=\"File-Inclusion-文件包含\"><a href=\"#File-Inclusion-文件包含\" class=\"headerlink\" title=\"File Inclusion(文件包含)\"></a>File Inclusion(文件包含)</h3><p>当服务器开启了allow_url_include选项时，就可以通过PHP的某些特性函数利用URL去包含动态包含文件。如果没有对文件的来源进行严格的审查就会导致任意文件或命令被执行。</p>\n<p>文件包含漏洞分为本地文件包含和远程文件包含，远程文件包含漏洞则是因为开启了PHP配置里的allow_url_fopen选项。</p>\n<h3 id=\"File-Upload（文件上传漏洞）\"><a href=\"#File-Upload（文件上传漏洞）\" class=\"headerlink\" title=\"File Upload（文件上传漏洞）\"></a>File Upload（文件上传漏洞）</h3><p>通常是由于上传文件的类型和内容没有进行严格的审查，使得攻击者有机可乘，上传木马来获取服务器的webshell权限。所以这个漏洞会给系统以毁灭性的破坏，有很多的中间件都曾经爆出过文件上传漏洞，例如Apache、Tomcat、Nginx等</p>\n<p>但是文件上传漏洞的重点是你要能够成功上传文件到服务器。其次是你上传的文件必须是可以进行执行的，最后还要知道上传文件的路径。也就是上传木马，得到路径，远程利用。</p>\n<h3 id=\"Insecure-CAPTCHA-不安全的验证流程\"><a href=\"#Insecure-CAPTCHA-不安全的验证流程\" class=\"headerlink\" title=\"Insecure CAPTCHA(不安全的验证流程)\"></a>Insecure CAPTCHA(不安全的验证流程)</h3><p>CAPTCHA是全自动区分计算机与人类的图灵测试。之所以说是不安全的是因为，在验证过程里存在逻辑漏洞。</p>\n<p>测试时需要先在<a href=\"http://www.google.com/recaptcha%E4%B8%8A%E6%B3%A8%E5%86%8Crecaptcha_public_key%E5%92%8Crecaptcha_prive_key,%E5%B0%86%E5%85%B6%E5%A1%AB%E5%85%A5DVWA%E4%B8%ADconfig%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84config.inc.php%E6%96%87%E4%BB%B6%E9%87%8C%EF%BC%8C%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E5%88%9D%E5%A7%8B%E7%95%8C%E9%9D%A2%E3%80%82\">http://www.google.com/recaptcha上注册recaptcha_public_key和recaptcha_prive_key,将其填入DVWA中config目录下的config.inc.php文件里，就可以看到初始界面。</a></p>\n<h3 id=\"SQL-Injection-SQL注入\"><a href=\"#SQL-Injection-SQL注入\" class=\"headerlink\" title=\"SQL Injection(SQL注入)\"></a>SQL Injection(SQL注入)</h3><p>测试是否存在注入点，这里用户交互的地方为表单，这就是常见的SQL注入漏洞存在的地方。正常测试输入1，可以得到正常的查询结果。以后再详细说明SQL。</p>\n<h3 id=\"SQL-injection（盲注）\"><a href=\"#SQL-injection（盲注）\" class=\"headerlink\" title=\"SQL injection（盲注）\"></a>SQL injection（盲注）</h3><p>所谓盲注就是再我们输入一些特殊字符时没有回显，影响不大，输入‘or 1=1#依旧可以显示所有的数据。</p>\n<h3 id=\"XSS（reflected）（反射型XSS）\"><a href=\"#XSS（reflected）（反射型XSS）\" class=\"headerlink\" title=\"XSS（reflected）（反射型XSS）\"></a>XSS（reflected）（反射型XSS）</h3><p>XSS就是跨站脚本攻击，通过向web网页植入恶意的Script代码，当用户浏览网页时就会执行代码，从而恶意攻击用户。</p>\n<h3 id=\"XSS（stored）（储存型XSS）\"><a href=\"#XSS（stored）（储存型XSS）\" class=\"headerlink\" title=\"XSS（stored）（储存型XSS）\"></a>XSS（stored）（储存型XSS）</h3><p>相比较于放射型XSS漏洞，存储型XSS影响更加持久，如果加入的代码过滤不严，那么这些代码会储存在服务器里，用户访问该页面就会触发代码执行，这种XSS比较危险，容易造成蠕虫、盗取cookie等。</p>\n<p>在name栏输入1，在message栏输入一下代码，可以看到下图</p>\n<p><code>&lt;script&gt;alert(/xss/)&lt;/script&gt;</code></p>\n<p><img src=\"https://img-blog.csdnimg.cn/20191031205935708.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2MTM5MDQ1,size_16,color_FFFFFF,t_70\" alt=\"6\"></p>\n<h2 id=\"参考文献\"><a href=\"#参考文献\" class=\"headerlink\" title=\"参考文献\"></a>参考文献</h2><p>[1]陈铁明.网络空间安全实战基础:第一版.北京:人民邮电出版社,2018</p>\n","text":"DVWA的介绍DVWA是用PHP和MySQL编写的用于常规web漏洞教学和检测web脆弱性测试程序，它包含SQL注入、XSS、CSRF等常见的一些安全漏洞。我们可以在本机或者靶机甚至服务器搭建DVWA环境，供我们练习渗透技术，也可以查看后端是怎么写的，了解原理。最重要的还是自己搭...","link":"","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":33,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"网络安全","slug":"网络安全","count":32,"path":"api/tags/网络安全.json"},{"name":"WEB","slug":"WEB","count":39,"path":"api/tags/WEB.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#DVWA%E7%9A%84%E4%BB%8B%E7%BB%8D\"><span class=\"toc-text\">DVWA的介绍</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#DVWA%E7%9A%84%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">DVWA的安装</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%90%AD%E5%BB%BAPHP%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">搭建PHP环境</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85DVWA\"><span class=\"toc-text\">安装DVWA</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E5%AE%89%E5%85%A8%E7%BA%A7%E5%88%AB\"><span class=\"toc-text\">配置安全级别</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#DVWA%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">DVWA基本使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#brute-Force%EF%BC%88%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3%EF%BC%89\"><span class=\"toc-text\">brute Force（暴力破解）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#command-injection%EF%BC%88%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%EF%BC%89\"><span class=\"toc-text\">command injection（命令注入）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#CSRF%EF%BC%88%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0%EF%BC%89\"><span class=\"toc-text\">CSRF（跨站请求伪造）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#File-Inclusion-%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB\"><span class=\"toc-text\">File Inclusion(文件包含)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#File-Upload%EF%BC%88%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%EF%BC%89\"><span class=\"toc-text\">File Upload（文件上传漏洞）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Insecure-CAPTCHA-%E4%B8%8D%E5%AE%89%E5%85%A8%E7%9A%84%E9%AA%8C%E8%AF%81%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">Insecure CAPTCHA(不安全的验证流程)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#SQL-Injection-SQL%E6%B3%A8%E5%85%A5\"><span class=\"toc-text\">SQL Injection(SQL注入)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#SQL-injection%EF%BC%88%E7%9B%B2%E6%B3%A8%EF%BC%89\"><span class=\"toc-text\">SQL injection（盲注）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#XSS%EF%BC%88reflected%EF%BC%89%EF%BC%88%E5%8F%8D%E5%B0%84%E5%9E%8BXSS%EF%BC%89\"><span class=\"toc-text\">XSS（reflected）（反射型XSS）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#XSS%EF%BC%88stored%EF%BC%89%EF%BC%88%E5%82%A8%E5%AD%98%E5%9E%8BXSS%EF%BC%89\"><span class=\"toc-text\">XSS（stored）（储存型XSS）</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\"><span class=\"toc-text\">参考文献</span></a></li></ol>","author":{"name":"A1andNS","slug":"blog-author","avatar":"/svg/head.png","link":"/","description":"爱你所爱，行你所行，听从你心，无问西东","socials":{"github":"https://github.com/A1andNS","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Metasploit入门上手","uid":"da0bd7cce36ba07293df734f9332fbf1","slug":"Metasploit入门上手","date":"2020-03-09T08:02:10.000Z","updated":"2021-07-17T16:59:17.587Z","comments":true,"path":"api/articles/Metasploit入门上手.json","keywords":"A1andNS","cover":"https://gitee.com/A1andNS/blogimage/raw/master/img/20210718005833.png","text":"Metasploit入门上手今天是2019年10月24日打卡嘀嘀嘀！！！菜鸟卡！！一起学习进步！！！ 基本介绍发展历史开源软件metasploit是由HD Moore在2003年创立的，并在2003年10月发布了第一个版本。它集成了11个渗透攻击模块。 版本metasploit分...","link":"","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":33,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"网络安全","slug":"网络安全","count":32,"path":"api/tags/网络安全.json"}],"author":{"name":"A1andNS","slug":"blog-author","avatar":"/svg/head.png","link":"/","description":"爱你所爱，行你所行，听从你心，无问西东","socials":{"github":"https://github.com/A1andNS","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"XCTF攻防世界Web新手入门题WP","uid":"e6587bf8c423daf7f73220884b619b0a","slug":"XCTF攻防世界Web新手入门题WP","date":"2020-03-09T07:59:49.000Z","updated":"2020-09-21T08:03:52.000Z","comments":true,"path":"api/articles/XCTF攻防世界Web新手入门题WP.json","keywords":"A1andNS","cover":[],"text":"第一题：view_source这一题从题目开始就在进行暗示，view_source意为观看源代码，这就是在明确说要去看网页源代码。 打开网页就是熟悉的flag不在这里，但是flag应该就在source里，所以使用F12进行源码查看，轻松找到了flag： cyberpeace{cc...","link":"","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"CTF","slug":"CTF","count":42,"path":"api/categories/CTF.json"}],"tags":[{"name":"网络安全","slug":"网络安全","count":32,"path":"api/tags/网络安全.json"},{"name":"WEB","slug":"WEB","count":39,"path":"api/tags/WEB.json"}],"author":{"name":"A1andNS","slug":"blog-author","avatar":"/svg/head.png","link":"/","description":"爱你所爱，行你所行，听从你心，无问西东","socials":{"github":"https://github.com/A1andNS","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}